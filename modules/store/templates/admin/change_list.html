{% extends "admin/base_site.html" %}
{% load i18n admin_urls admin_list %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3 flex-wrap" style="gap:10px;">
  <div>
    <h4 class="mb-0">
      {% if cl.opts.app_label == 'auth' and cl.opts.model_name == 'group' %}
        Nhóm quyền
      {% elif cl.opts.app_label == 'auth' and cl.opts.model_name == 'user' %}
        Người dùng
      {% else %}
        {{ cl.opts.verbose_name_plural|capfirst }}
      {% endif %}
    </h4>
    <small class="text-muted">{{ cl.result_count }} bản ghi</small>
  </div>

  <div class="d-flex align-items-center" style="gap:10px;">
    {% if has_add_permission %}
      <a class="btn btn-primary btn-sm" href="{% url cl.opts|admin_urlname:'add' %}">
        <i class="mdi mdi-plus"></i> Thêm mới
      </a>
    {% endif %}
  </div>
</div>

{% if cl.search_fields %}
<form method="get" class="mb-3">
  <div class="input-group">
    <input class="form-control" type="text" name="{{ search_var }}" value="{{ cl.query }}" placeholder="Tìm kiếm...">
    <div class="input-group-append">
      <button class="btn btn-outline-secondary" type="submit">
        <i class="mdi mdi-magnify"></i>
      </button>
    </div>
  </div>

  {% for k, v in cl.params.items %}
    {% if k != search_var %}
      <input type="hidden" name="{{ k }}" value="{{ v }}">
    {% endif %}
  {% endfor %}
</form>
{% endif %}

<div class="row">
  {% if cl.has_filters %}
  <div class="col-lg-3 mb-3">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Bộ lọc</h5>
        {% for spec in cl.filter_specs %}
          <div class="mb-3">
            <div class="text-muted mb-1">{{ spec.title }}</div>
            {% admin_list_filter cl spec %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
  <div class="col-lg-9">
  {% else %}
  <div class="col-12">
  {% endif %}

    <div class="table-responsive">
      <form id="changelist-form" method="post" novalidate>
        {% csrf_token %}
        {% if cl.formset %}{{ cl.formset.management_form }}{% endif %}
        {% result_list cl %}
      </form>
    </div>

    <div class="mt-3">
      {% pagination cl %}
    </div>

  </div>
</div>
{% endblock %}
